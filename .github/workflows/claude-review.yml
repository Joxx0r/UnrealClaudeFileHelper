name: Claude PR Review

on:
  pull_request:
    types: [opened, ready_for_review]

permissions:
  contents: read
  pull-requests: write
  issues: write
  statuses: write
  checks: write

jobs:
  request-claude-review:
    runs-on: ubuntu-latest
    # Do not run on draft PRs
    if: github.event.pull_request.draft == false
    steps:
      - name: Request Claude review
        uses: actions/github-script@v7
        with:
          script: |
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.pull_request.number,
              body: '@claude Please review this PR. Focus on:\n- Code quality and potential bugs\n- Security issues\n- Test coverage\n- Documentation completeness\n\nUse the opus model for thorough analysis.'
            });

